{% macro as_link(object) -%}
    {% set type = object.__tablename__ %}
    
    <a href="/{{ type }}/{{ object.id }}">{% if type == "films" %}{{ object.title }} ({{ object.release_date.year }}){% elif type == "scenes" %}Act {{ object.act }}, Scene {{ object.scene }}{% elif type == "people" %}{{ object.fname }} {{ object.lname }}{% elif object.name %}{{ object.name }}{% elif object.title %}{{ object.title }}{% endif %}</a>

    {% if object.description %}
          <p>{{ object.description }}</p>
    {% endif %}
{%- endmacro %}

{% macro just_link(object) -%}
    {% set type = object.__tablename__ %}
    
    <a href="/{{ type }}/{{ object.id }}">{% if type == "films" %}{{ object.title }} ({{ object.release_date.year }}){% elif type == "scenes" %}Act {{ object.act }}, Scene {{ object.scene }}{% elif type == "people" %}{{ object.fname }} {{ object.lname }}{% elif object.name %}{{ object.name }}{% elif object.title %}{{ object.title }}{% endif %}</a>
{%- endmacro %}

{% macro as_url(object) -%}
{% set type = object.__tablename__ %}
/{{ type }}/{{ object.id }}
{%- endmacro %}

{% macro as_title(object) -%}
    {% if type == "films" %}{{ object.title }} ({{ object.release_date.year }}){% elif type == "scenes" %}Act {{ object.act }}, Scene {{ object.scene }}{% elif type == "people" %}{{ object.fname }} {{ object.lname }}{% elif object.name %}{{ object.name }}{% elif object.title %}{{ object.title }}{% endif %}
{%- endmacro %}

{% macro as_image(object) -%}
    {% set type = object.__tablename__ %}
    {% if type == "films" %}{% set source = "poster_path" %}
    {% elif type == "people" %}{% set source = "photo_path" %}
    {% else %}{% set source = "img" %}
    {% endif %}

    {% if object[source] != None %}
        <a href="/{{ type }}/{{ object.id }}"><img src="{{ object[source] }}" alt="{{ as_title(object) }}"></a>
    {% endif %}
{%- endmacro %}

{% macro as_image_url(object) -%}
    {% set type = object.__tablename__ %}
    {% if type == "films" %}{% set source = "poster_path" %}
    {% elif type == "people" %}{% set source = "photo_path" %}
    {% else %}{% set source = "img" %}
    {% endif %}{% if object[source] != None %}{{ object[source] }}{% endif %}
{%- endmacro %}


{% macro format_quote(quote) -%}
<figure class="quote">
    <blockquote>{{ quote.text }}</blockquote>
    <figcaption><cite>{{ macros.as_link(quote.character) }} (<em>{{ macros.as_link(quote.play) }}</em>
        {{ macros.as_link(quote.scene) }})</cite></figcaption>
</figure>
{%- endmacro %}